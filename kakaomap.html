<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoLocation22_3.html</title>
</head>

<body>
    <h2>지도 서비스</h2>
    <a href="kakaomap.html">지도로 이동</a>
    <fieldset>
        <legend>현재 위치를 지도에 표시하기</legend>
        <div id="map" style="width: 500px; height: 400px; background-color: yellow;"></div>
    </fieldset>
    <fieldset>
        <legend>주소로 위치 찾기</legend>
        <div>
            <input id="address" type="text" />
            <button onclick="searchByAddress();">주소명으로 지도 찾기</button>
        </div>
    </fieldset>
    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey= fc796e1a9e4072d7a828202eed2ca289"></script>
    <script>
        /*
        //샘플코드
        var mapContainer = document.getElementById('map'); // 지도를 표시할 div 
        var mapOption = { 
              center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
              level: 3 // 지도의 확대 레벨
          };
          // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
         var map = new kakao.maps.Map(mapContainer, mapOption);
          */
        var map;
        //나의 현재 위치의 위도경도 얻기
        if (navigator.geolocation) { //브라우저의 Geolocation지원 여부 확인
            //PostionOptions객체 설정용]
            var options = { timeout: 3000, maxinumAge: 5000 };
            //현재 위치 정보 딱 한번만 얻기
            navigator.geolocation.getCurrentPosition(successCallback);
        }

        //위치 정보를 얻었을 때 자동으로 호출되는 콜백 함수 : 인자는 Position객체
        function successCallback(position) {
            console.log('position의 자료형 : ' + position);
            console.log(position);
            //위도/경도 얻기]
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            //div에 지도 표시하기
            displayKaKaoMap(lat, lng);
        }
        //지도 표시함수]
        function displayKaKaoMap(lat, lng) {
            var Container = document.getElementById('map'); // 지도를 표시할 div 
            var Option = {
                center: new kakao.maps.LatLng(lat, lng), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };
            // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
            map = new kakao.maps.Map(Container, Option);
            //지도에 마커 표시하기
            setMarker(lat, lng);
        }
        //마커표시하는 함수]
        var setMarker = function (lat, lng) {
            // 마커가 표시될 위치입니다 
            var markerPosition = new kakao.maps.LatLng(lat, lng);

            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                position: markerPosition
            });

            // 마커가 지도 위에 표시되도록 설정합니다
            marker.setMap(map);
            marker.setDraggable(true);
        };
    </script>

</body>

</html>